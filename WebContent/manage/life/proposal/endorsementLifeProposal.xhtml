<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:o="http://omnifaces.org/ui" xmlns:p="http://primefaces.org/ui" template="/common/commonLayout.xhtml" xmlns:jsf="http://xmlns.jcp.org/jsf" >
	<ui:param name="header" value="#{EndorsementLifeProposalActionBean.getPageHeader()}" />
	<ui:param name="headerRendered" value="true" />
	<ui:define name="content">
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
		<h:form enctype="multipart/form-data" id="lifeProposalEntryForm">
			<p:messages globalOnly="true" id="messages" showDetail="true" />
			<p:wizard flowListener="#{EndorsementLifeProposalActionBean.onFlowProcess}" widgetVar="wiz">
				<p:tab id="proposalInfo" title="Proposal Info">
					<p:panel header="Proposal Info" id="proposalInfoWizardPanel" style="min-height:270px;">
						<p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
							<p:panelGrid id="proposalLeftPanel" columns="2" columnClasses="ui-grid-col-3,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								<p:outputLabel />
								<p:message for="selectedContractorType" display="text" />
								<h:outputText styleClass="input-label mandatory" value="#{label['ADDNEWLIFEPROPOSAL_CUSTOMER_LABEL']}" />
								<p:selectOneRadio required="true" id="selectedContractorType" value="#{EndorsementLifeProposalActionBean.contractorType}" disabled="true">
									<f:selectItem itemLabel="Person" itemValue="CUSTOMER" />
									<f:selectItem itemLabel="Organization" itemValue="ORGANIZATION" />
									<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.changeOrgEvent}" update=":lifeProposalEntryForm:customerPanelGroup" />
								</p:selectOneRadio>
								<p:outputLabel />
								<p:message for="customer" display="text" />
								<p:outputLabel />
								<p:panelGrid styleClass="ui-panelgrid-blank">
									<div style="margin: -6px -6px;" class="ui-g ui-fluid" jsf:id="customerPanelGroup">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectCustomer()}" id="selectCustomerDialogLink"
												process="@this" rendered="#{EndorsementLifeProposalActionBean.contractorType eq 'CUSTOMER'}" disabled="true">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnCustomer}" update="customerPanelGroup" />
											</p:commandButton>
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectOrganization()}" id="selectOrganizationDialogLink"
												process="@this" rendered="#{EndorsementLifeProposalActionBean.contractorType eq 'ORGANIZATION'}" disabled="true">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnOrganization}" update="customerPanelGroup" />
											</p:commandButton>
											<p:watermark for="customer" value="#{EndorsementLifeProposalActionBean.contractorType eq 'CUSTOMER' ? 'Select Customer' : 'Select Organization'}" />
											<p:inputText id="customer" readonly="#{EndorsementLifeProposalActionBean.lifeProposal.customerName == null ? facesContext.currentPhaseId.ordinal eq 6 : true}" required="true"
												value="#{EndorsementLifeProposalActionBean.lifeProposal.customerName}" />
											<p:commandButton styleClass="red-button" icon="fa fa-times" rendered="#{EndorsementLifeProposalActionBean.contractorType eq 'CUSTOMER'}"
												action="#{EndorsementLifeProposalActionBean.lifeProposal.setCustomer(null)}" process="@this" update="customer" disabled="true"/>
											<p:commandButton styleClass="red-button" icon="fa fa-times" rendered="#{EndorsementLifeProposalActionBean.contractorType eq 'ORGANIZATION'}"
												action="#{EndorsementLifeProposalActionBean.lifeProposal.setOrganization(null)}" process="@this" update="customer" disabled="true"/>
										</div>
									</div>
								</p:panelGrid>
								<p:outputLabel />
								<p:message for="product" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Product" />
								<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" disabled="#{not empty EndorsementLifeProposalActionBean.insuredPersonInfoDTOList}" id="product" required="true"
									value="#{EndorsementLifeProposalActionBean.product}">
									<f:selectItem itemLabel="-- Select Product --" noSelectionOption="true" />
									<f:selectItems itemLabel="#{product.name}" itemValue="#{product}" value="#{EndorsementLifeProposalActionBean.productsList}" var="product" />
									<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.changeProduct}"
										update="paymentType typesOfSportPanelGroup sumInsuredInfo unit periodInsure periodPanel" />
								</p:selectOneMenu>
								<p:outputLabel />
								<p:message for="paymentType" display="text" />
								<h:outputText styleClass="input-label mandatory" value="#{label['ADDNEWLIFEROPOSAL_PAYMENTTYPE_LABEL']}" />
								<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="paymentType" required="true" value="#{EndorsementLifeProposalActionBean.lifeProposal.paymentType}" disabled="#{!EndorsementLifeProposalActionBean.isPaymentTypeChange}" >
									<f:selectItem itemLabel="-- Select Payment Type --" noSelectionOption="true" />
									<f:selectItems itemLabel="#{paymentType.name}" itemValue="#{paymentType}" value="#{EndorsementLifeProposalActionBean.paymentTypes}" var="paymentType" />
								</p:selectOneMenu>
							</p:panelGrid>
							<p:panelGrid id="proposalRightPanel" columns="2" columnClasses="ui-grid-col-4,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								<p:outputLabel />
								<p:message for="saleUserType" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Sale Channel" />
								<p:selectOneMenu required="true" styleClass="input-label" id="saleUserType" value="#{EndorsementLifeProposalActionBean.lifeProposal.saleChannelType}" disabled="true">
									<f:selectItem itemLabel="Selected Sale Channel" />
									<f:selectItems value="#{EndorsementLifeProposalActionBean.saleChannel}" />
									<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.changeSaleEvent}" update="@form:proposalRightPanel" />
								</p:selectOneMenu>
								<p:outputLabel />
								<p:message for="agent" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Agent" rendered="#{(EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'AGENT')}" />
								<h:outputText styleClass="input-label" value="Agent"
									rendered="#{(EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'BANK') or (EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'DIRECTMARKETING')}" />
								<p:panelGrid styleClass="ui-panelgrid-blank"
									rendered="#{(EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'AGENT') or (EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'BANK') or (EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'DIRECTMARKETING')}">
									<div style="margin: -6px -7px;" class="ui-g ui-fluid" id="agentPanelGroup">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectAgent()}" id="selectAgentDialogLink" process="@this" disabled="true">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnAgent}" update="agent" />
											</p:commandButton>
											<p:inputText id="agent"
												readonly="#{EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'AGENT' and EndorsementLifeProposalActionBean.lifeProposal.agent.fullName == null? facesContext.currentPhaseId.ordinal eq 6 : true}"
												required="#{EndorsementLifeProposalActionBean.lifeProposal.saleChannelType eq 'AGENT'}"
												value="#{(EndorsementLifeProposalActionBean.lifeProposal.agent ==null ? '' : EndorsementLifeProposalActionBean.lifeProposal.agent.fullName)}" />
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.lifeProposal.setAgent(null)}" process="@this" update="agent" disabled="true"/>
										</div>
									</div>
								</p:panelGrid>
								<p:outputLabel />
								<p:message for="submittedDate" display="text" />
								<h:outputText styleClass="input-label mandatory" value="#{label['ADDNEWLIFEPROPOSAL_SUBMITTEDDATE_LABEL']}" />
								<p:calendar id="submittedDate" pattern="#{ApplicationSetting.dateFormat}" required="true" showOn="button" timeZone="#{ApplicationSetting.timeZone}"
									value="#{EndorsementLifeProposalActionBean.lifeProposal.submittedDate}" />
								<p:outputLabel />
								<p:message for="branch" display="text" />
								<h:outputText styleClass="input-label mandatory" value="#{label['ADDNEWLIFEPROPOSAL_BRANCH_LABEL']}" />
							   	<p:selectOneMenu id="branch" value="#{EndorsementLifeProposalActionBean.user.loginBranch.name}" disabled="true">
						            <f:selectItems value="#{EndorsementLifeProposalActionBean.user.accessBranchList}" var="branch" itemLabel="#{branch.name}" itemValue="#{branch}" /> 
						        </p:selectOneMenu>
						        <p:outputLabel />
						        <p:message for="salesPoints" display="text"/>
						        <h:outputText styleClass="input-label mandatory" value="Sales Points"  />
								<p:panelGrid styleClass="ui-panelgrid-blank" >
									<div style="margin:-6px -7px;" class="ui-g ui-fluid" id="salesPointsPanelGroup">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectSalesPoints()}" id="selectSalesPointsDialogLink"
												disabled="true" process="@this">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnSalesPoints}" update="salesPoints" />
											</p:commandButton>
											<p:inputText id="salesPoints" readonly="#{EndorsementLifeProposalActionBean.lifeProposal.salesPoints == null? facesContext.currentPhaseId.ordinal eq 6 : true}" required="true"
												value="#{(EndorsementLifeProposalActionBean.lifeProposal.salesPoints == null ? '' :EndorsementLifeProposalActionBean.lifeProposal.salesPoints.name)}"  disabled="true"/>
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.lifeProposal.setSalesPoints(null)}" disabled="true" process="@this" update="salesPoints" />
										</div>
									</div>
								</p:panelGrid>
        
								<!-- <h:outputText rendered="#{EndorsementLifeProposalActionBean.isEndorse}" styleClass="input-label mandatory" value="Is it Non Financial Endorse" />
								<p:selectBooleanCheckbox required="true" rendered="#{EndorsementLifeProposalActionBean.isEndorse}" id="checkFinancial"
									value="#{EndorsementLifeProposalActionBean.lifeProposal.nonFinancialEndorse}" update="endorseLetterPrint" /> -->
								<p:outputLabel />
								<p:message for="periodOfInsurance" display="text" rendered="#{!EndorsementLifeProposalActionBean.isPersonalAccident and !EndorsementLifeProposalActionBean.isShortTermEndowment}" />
								<p:message for="periodMonth" display="text" rendered="#{EndorsementLifeProposalActionBean.isPersonalAccident}" />
								<p:message for="periodYear" display="text" rendered="#{EndorsementLifeProposalActionBean.isShortTermEndowment}" />
								<h:outputText id="periodInsure" styleClass="input-label mandatory"
									value="#{EndorsementLifeProposalActionBean.isMonthBase ? 'Period of Insurance (Months)' : 'Period of Insurance (Years)' } " />
								<p:outputPanel id="periodPanel">
									<p:inputText id="periodOfInsurance" rendered="#{!EndorsementLifeProposalActionBean.isPersonalAccident and !EndorsementLifeProposalActionBean.isShortTermEndowment}" required="true"
										value="#{EndorsementLifeProposalActionBean.lifeProposal.periodMonth}"
										disabled="#{!EndorsementLifeProposalActionBean.isTermChange}" maxlength="2">
										<o:validator maximum="#{EndorsementLifeProposalActionBean.maximumTrem}" minimum="#{EndorsementLifeProposalActionBean.munimumTrem}" validatorId="javax.faces.LongRange" />
									</p:inputText>
									<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="periodMonth" rendered="#{EndorsementLifeProposalActionBean.isPersonalAccident}" required="true"
										value="#{EndorsementLifeProposalActionBean.lifeProposal.periodMonth}"
										disabled="#{!EndorsementLifeProposalActionBean.isTermChange}">
										<f:selectItem itemLabel="-- Select Period --" noSelectionOption="true" />
										<f:selectItems value="#{EndorsementLifeProposalActionBean.periodMonths}" var="month" />
									</p:selectOneMenu>
									<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="periodYear" rendered="#{EndorsementLifeProposalActionBean.isShortTermEndowment}" required="true"
										value="#{EndorsementLifeProposalActionBean.lifeProposal.periodMonth}"
										disabled="#{!EndorsementLifeProposalActionBean.isTermChange}">
										<f:selectItem itemLabel="-- Select Period --" noSelectionOption="true" />
										<f:selectItems value="#{EndorsementLifeProposalActionBean.sePeriodYears}" var="year" />
									</p:selectOneMenu>
								</p:outputPanel>
								<p:outputLabel />
								<p:message for="startDate" display="text" />
								<h:outputText styleClass="input-label mandatory" value="#{label['ADDNEWLIFEPROPOSAL_STARTDATE_LABEL']}" />
								<p:calendar id="startDate" pattern="#{ApplicationSetting.dateFormat}" required="true" showOn="button" timeZone="#{ApplicationSetting.timeZone}"
									value="#{EndorsementLifeProposalActionBean.lifeProposal.startDate}"  disabled="true"/>
								<p:outputLabel />
							</p:panelGrid>
						</p:panelGrid>
					</p:panel>
				</p:tab>
				<p:tab id="InsuredPersonInfo" title="InsuredPerson Info">
					<p:panel header="InsuredPerson Information" id="insuredPersonInfoWizardPanel" style="min-height:270px;">
						<p:panelGrid columns="2" id="personInfoPanel" columnClasses="ui-grid-col-6,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
							<p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								<p:panelGrid id="personInfoLeftPanel" columns="2" columnClasses="ui-grid-col-3,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
									<p:outputLabel />
									<p:message for="existingCustomer" display="text" />
									<h:outputText styleClass="input-label" value="#{label['MANAGELIFEPROPOSAL_INSURED_PERSOIN_LABEL']}" />
									<p:panelGrid styleClass="ui-panelgrid-blank">
										<div style="margin: -6px -7px;" class="ui-g ui-fluid" jsf:id="insuredPersonPanel">
											<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
												<p:commandButton widgetVar="validateButtonWidget" styleClass="green-button" icon="fa fa-search" 
												actionListener="#{EndorsementLifeProposalActionBean.selectCustomer()}" 
												id="selectInsuredPersonDialogLink"  
													disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"
													process="@this" >
													<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnInsuredPerson}" update="personInfoPanel" />
												</p:commandButton>
												<p:inputText id="existingCustomer" readonly="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.name == null ? facesContext.currentPhaseId.ordinal eq 6 : true}"
													required="true"
													value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.fullName == null ? EndorsementLifeProposalActionBean.lifeProposal.customerName : EndorsementLifeProposalActionBean.insuredPersonInfoDTO.fullName}" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"/>
												<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.resetInsuredPersonDTO()}" process="@this" 
												update="personInfoPanel" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"/>
											</div>
											</div>	
									</p:panelGrid>
									<p:outputLabel />
									<p:message for="initialId" display="text" />
									<h:outputText styleClass="input-label mandatory" value="#{label['MANAGE_CUSTOMER_INITIALID_LABEL']}" />
									<p:inputText id="initialId" required="#{not empty param[isRequired.clientId]}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.initialId}"
										disabled="#{EndorsementLifeProposalActionBean.selfRelation}">
										<f:validateLength maximum="36" />
									</p:inputText>
									<p:outputLabel />
									<p:message for="firstName" display="text" />
									<h:outputText styleClass="input-label mandatory" value="#{label['MANAGE_CUSTOMER_FIRSTNAME_LABEL']}" />
									<p:inputText id="firstName" required="#{not empty param[isRequired.clientId]}" disabled="#{EndorsementLifeProposalActionBean.selfRelation}"
										value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.name.firstName}">
										<f:validateLength maximum="360" />
									</p:inputText>
									<p:outputLabel />
									<p:message for="middleName" display="text" />
									<h:outputText styleClass="input-label" value="#{label['MANAGE_CUSTOMER_MIDDLENAME_LABEL']}" />
									<p:inputText id="middleName" disabled="#{EndorsementLifeProposalActionBean.selfRelation}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.name.middleName}">
										<f:validateLength maximum="100" />
									</p:inputText>
									<p:outputLabel />
									<p:message for="lastName" display="text" />
									<h:outputText styleClass="input-label" value="#{label['MANAGE_CUSTOMER_LASTNAME_LABEL']}" />
									<p:inputText id="lastName" disabled="#{EndorsementLifeProposalActionBean.selfRelation}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.name.lastName}">
										<f:validateLength maximum="100" />
									</p:inputText>
									<p:outputLabel />
									<p:message for="fatherName" display="text" />
									<h:outputText styleClass="input-label mandatory" value="Father Name" />
									<p:inputText id="fatherName" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.fatherName}" required="#{not empty param[isRequired.clientId]}" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}">
										<f:validateLength maximum="100" />
									</p:inputText>
									<p:outputLabel />
									<p:message for="dateOfBirth" display="text" />
									<h:outputText styleClass="input-label mandatory" value="DateOfBirth" />
									<p:inputMask id="dateOfBirth" mask="99-99-9999" required="#{not empty param[isRequired.clientId]}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.dateOfBirth}"
										disabled="#{(EndorsementLifeProposalActionBean.isEndorse and EndorsementLifeProposalActionBean.lifeProposal.nonFinancialEndorse) or EndorsementLifeProposalActionBean.selfRelation}">
										<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}" />
									</p:inputMask>
									<p:outputLabel />
									<p:message for="idType" display="text" />
									<h:outputText styleClass="input-label mandatory" value="ID Type" />
									<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="idType" required="#{not empty param[isRequired.clientId]}"
										disabled="#{EndorsementLifeProposalActionBean.selfRelation}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType}">
										<f:selectItem itemLabel="-- Select Id Type --" noSelectionOption="true" />
										<f:selectItems itemLabel="#{type.label}" itemValue="#{type}" value="#{EndorsementLifeProposalActionBean.idTypes}" var="type" />
										<p:ajax event="valueChange" update="insuredPersonInfoPanel idType" />
									</p:selectOneMenu>
								</p:panelGrid>
								<p:panelGrid id="insuredPersonInfoPanel" columns="2" columnClasses="ui-grid-col-3,ui-grid-col-9" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
									<p:outputLabel />
									<p:message for="insuredPersonNo" display="text" />
									<h:outputText styleClass="input-label mandatory" id="idLabel"
										rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType ne 'STILL_APPLYING' or EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType == null}"
										value="#{label['MANAGE_AGENT_IDNO_LABEL']}" />
									<p:panelGrid id="insuredPersonIdNoGroup" columns="4" columnClasses="ui-grid-col-3,ui-grid-col-5,ui-grid-col-3,ui-grid-col-3" layout="grid"
										styleClass="ui-panelgrid-blank ui-fluid" rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'NRCNO'}">
										<p:selectOneMenu id="insuredPersonStateCode" style="margin-left:-10px;" rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'NRCNO'}" required="true"
											value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.provinceCode}" disabled="#{EndorsementLifeProposalActionBean.selfRelation}">
											<f:selectItem itemLabel="" />
											<f:selectItems itemLabel="#{provinceCode}" itemValue="#{provinceCode}" value="#{EndorsementLifeProposalActionBean.provinceCodeList}" var="provinceCode" />
											<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.changeIPersonProvinceCode}" update="insuredPersonIdNoGroup" />
										</p:selectOneMenu>
										<p:selectOneMenu id="insuredPersonTownshipCode" style="margin-left:-27px;max-width:110px;" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.townshipCode}"
											rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'NRCNO'}" filter="true" filterMatchMode="startsWith"
											disabled="#{EndorsementLifeProposalActionBean.selfRelation}">
											<f:selectItem itemLabel="" />
											<f:selectItems itemLabel="#{townshipCode}" itemValue="#{townshipCode}" value="#{EndorsementLifeProposalActionBean.iPersonTownshipCodeList}" var="townshipCode" />
										</p:selectOneMenu>
										<p:selectOneMenu id="idConditionType" style="margin-left:-45px;" required="true" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idConditionType}"
											rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'NRCNO'}" disabled="#{EndorsementLifeProposalActionBean.selfRelation}">
											<f:selectItem itemLabel="" />
											<f:selectItems itemLabel="#{type.label}" itemValue="#{type}" value="#{EndorsementLifeProposalActionBean.idConditionTypeSelectItemList}" var="type" />
										</p:selectOneMenu>
										<p:inputText id="insuredPersonNo" style="margin-left:-60px;min-width:80px;" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idNo}" required="true"
											onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" maxlength="6"
											rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType ne 'STILL_APPLYING'}" disabled="#{EndorsementLifeProposalActionBean.selfRelation}" >
                                            <f:validateLength minimum="6" maximum="6" />
                                        </p:inputText>
									</p:panelGrid>
									<p:panelGrid id="insuredPersonIdNoGroup1" columns="1" columnClasses="ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
										rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'FRCNO' or EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'PASSPORTNO'}">
										<p:inputText id="frcIdNo" style="margin-left: -10;width: 300px" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idNo}" required="true"
											disabled="#{EndorsementLifeProposalActionBean.selfRelation}"
											rendered="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'FRCNO' or EndorsementLifeProposalActionBean.insuredPersonInfoDTO.idType eq 'PASSPORTNO'}" />
									</p:panelGrid>
								</p:panelGrid>
							</p:panelGrid>
							<p:panelGrid id="personInfoRightPanel" columns="2" columnClasses="ui-grid-col-3,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								<p:outputLabel />
								<p:message for="insuredPersonRs" display="text" />
								<h:outputText styleClass="input-label" value="#{label['MANAGE_INSUREDPERSON_BENEFICIARIES_RELATIONSHIP_LABEL']}" />
								<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="insuredPersonRs" disabled="#{EndorsementLifeProposalActionBean.selfRelation}"
									value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.relationship}">
									<f:selectItem itemLabel="Select Relationship" noSelectionOption="true" />
									<f:selectItems itemLabel="#{relationship.name}" itemValue="#{relationship}" value="#{EndorsementLifeProposalActionBean.relationshipList}" var="relationship" />
									<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.changeRelationship}" update="@form:personInfoPanel" />
								</p:selectOneMenu>
								<p:outputLabel />
								<p:message for="resident" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Resident Address" />
								<p:inputTextarea id="resident" required="#{not empty param[isRequired.clientId]}" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"
									value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.residentAddress.residentAddress}">
									<f:validateLength maximum="200" />
								</p:inputTextarea>
								<p:outputLabel />
								<p:message for="townShip" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Resident TownShip" />
								<p:panelGrid styleClass="ui-panelgrid-blank">
									<div style="margin: -6px -7px;" class="ui-g ui-fluid" id="townShipPanelGroup1">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectTownship()}" id="selectTownShipDialogLink1"
												process="@this" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnInsuredPersonTownShip}" update="townShip" />
											</p:commandButton>
											<p:inputText id="townShip"
												readonly="#{not empty param[isRequired.clientId] and EndorsementLifeProposalActionBean.insuredPersonInfoDTO.residentAddress.township.name == null ? facesContext.currentPhaseId.ordinal eq 6 : true}"
												style="margin-left:-4px;" required="#{not empty param[isRequired.clientId]}"
												value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.residentAddress.township == null ? '' : EndorsementLifeProposalActionBean.insuredPersonInfoDTO.residentAddress.township.name}" />
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.residentAddress.setTownship(null)}"
												disabled="#{EndorsementLifeProposalActionBean.selfRelation}" process="@this" update="townShip" />
										</div>
									</div>
								</p:panelGrid>
								<p:outputLabel />
								<p:message for="occupation" display="text" />
								<h:panelGroup>
									<h:outputText styleClass="input-label" value="Occupation" />
									<h:outputText rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife or EndorsementLifeProposalActionBean.isPersonalAccident}" value="*" style="color:red;" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"/>
								</h:panelGroup>
								<p:panelGrid styleClass="ui-panelgrid-blank">
									<div style="margin: -6px -7px;" class="ui-g ui-fluid" id="occupationPanelGroup">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectOccupation()}" id="selectOccupationDialogLink1"
												process="@this">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnOccupation}" update="occupation" />
											</p:commandButton>
											<p:inputText id="occupation"
												readonly="#{!(EndorsementLifeProposalActionBean.isEndownmentLife or EndorsementLifeProposalActionBean.isPersonalAccident) ? true : EndorsementLifeProposalActionBean.insuredPersonInfoDTO.occupation == null ? facesContext.currentPhaseId.ordinal eq 6 ? true : !(not empty param[isRequired.clientId]) : true}"
												required="#{(not empty param[isRequired.clientId])and (EndorsementLifeProposalActionBean.isEndownmentLife or EndorsementLifeProposalActionBean.isPersonalAccident)}" style="margin-left:-4px;"
												value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.occupation == null ? '' : EndorsementLifeProposalActionBean.insuredPersonInfoDTO.occupation.name}" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}" />
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.setOccupation(null)}" process="@this"
												update="occupation" />
										</div>
									</div>
								</p:panelGrid>
								<p:outputLabel />
								<p:message for="riskOccupation" display="text" />
								<h:outputText styleClass="input-label" value="Dangerous Occupation" />
								<p:panelGrid styleClass="ui-panelgrid-blank" id="riskOccupationPanel">
									<div style="margin: -6px -7px;" class="ui-g ui-fluid" id="riskyOccupationPanelGp">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectRiskyOccupation()}" id="selectRiskyOccupation"
												process="@this">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnRiskyOccupation}" update="riskOccupation" />
											</p:commandButton>
											<p:inputText id="riskOccupation" style="margin-left:-4px;" readonly="true"
												value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.riskyOccupation == null ? '' : EndorsementLifeProposalActionBean.insuredPersonInfoDTO.riskyOccupation.name}"  disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"/>
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.riskyOccupation.setName(null)}" process="@this"
												update="riskOccupation" />
										</div>
									</div>
								</p:panelGrid>
								<p:outputLabel />
								<p:message for="gender" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Gender" />
								<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="gender" required="#{not empty param[isRequired.clientId]}"
									disabled="#{EndorsementLifeProposalActionBean.selfRelation}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.gender}">
									<f:selectItem itemLabel=" -- Select Gender --" noSelectionOption="true" />
									<f:selectItems itemLabel="#{type.label}" itemValue="#{type}" value="#{EndorsementLifeProposalActionBean.gender}" var="type" />
								</p:selectOneMenu>
								<p:outputLabel rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife}" />
								<p:message for="weight" display="text" rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife}" />
								<h:outputText styleClass="input-label mandatory" value="Weight" rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife}" />
								<p:inputText id="weight" rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife}" required="#{not empty param[isRequired.clientId]}"
									value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.weight}">
									<o:validator disabled="#{empty param[isRequired.clientId]}" minimum="1" validatorId="javax.faces.LongRange" />
								</p:inputText>
								<h:outputText rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife}" value="Height" styleClass="input-label mandatory" style="margin-top:50px !important;" />
								<p:panelGrid columns="2" rendered="#{EndorsementLifeProposalActionBean.isEndownmentLife}">
									<p:message for="feets" display="text" style="margin-left:-10" />
									<p:message for="inches" display="text" style="margin-left:-10" />
									<p:inputText id="feets" placeholder="Feets" required="#{not empty param[isRequired.clientId]}" style="margin-left:-10"
										value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.feets}">
										<o:validator disabled="#{empty param[isRequired.clientId]}" minimum="1" validatorId="javax.faces.LongRange" />
									</p:inputText>
									<p:inputText id="inches" placeholder="Inches" required="#{not empty param[isRequired.clientId]}" style="margin-left:-10"
										value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.inches}">
										<o:validator disabled="#{empty param[isRequired.clientId]}" minimum="0" validatorId="javax.faces.LongRange" />
									</p:inputText>
								</p:panelGrid>
								<p:outputLabel rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite ? false :true}" />
								<p:message for="sumInsuredInfo" display="text" rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite ? false :true}" />
								<h:outputText styleClass="input-label mandatory" value="Sum Insured" 
									rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite ? false :true}" />
								<p:inputNumber id="sumInsuredInfo" style="float:left;text-align:right;" required="#{not empty param[isRequired.clientId]}"
									rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite ? false :true}"
									value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.sumInsuredInfo}" disabled="#{!EndorsementLifeProposalActionBean.isSIChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}">
									<o:validator disabled="#{empty param[isRequired.clientId]}" maximum="#{EndorsementLifeProposalActionBean.sumInsured}"
										minimum="#{EndorsementLifeProposalActionBean.product.minValue}" validatorId="javax.faces.LongRange" />
								</p:inputNumber>
								<p:outputLabel />
								<p:message for="unit" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Unit" rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite}" />
								<p:inputText id="unit" required="#{not empty param[isRequired.clientId]}" style="width:300px;"
									rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite}" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.unit}"
									>
									<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}" />
									<o:validator disabled="#{empty param[isRequired.clientId]}" maximum="#{EndorsementLifeProposalActionBean.product.maxValue}"
										minimum="#{EndorsementLifeProposalActionBean.product.minValue}" validatorId="javax.faces.LongRange" />
								</p:inputText>
								<p:outputLabel />
								<p:message for="riskyOccupation" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Is Risky Occupation" rendered="#{EndorsementLifeProposalActionBean.isPersonalAccident}" />
								<p:selectBooleanCheckbox id="riskyOccupation" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.isRiskyOccupation}"
									rendered="#{EndorsementLifeProposalActionBean.isPersonalAccident}" />
								<p:outputLabel />
								<p:outputLabel />
								<h:outputText rendered="#{EndorsementLifeProposalActionBean.isSportMan}" styleClass="input-label" value="Types Of Sport" />
								<p:panelGrid styleClass="ui-panelgrid-blank" rendered="#{EndorsementLifeProposalActionBean.isSportMan}" id="typesOfSportPanelGroup">
									<div style="margin: -6px -7px;" class="ui-g ui-fluid" id="typesOfSportPanelGroup">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectTypesOfSport()}" id="selectTypesOfSportDialogLink1"
												process="@this">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnTypesOfSport}" update="typesOfSport" />
											</p:commandButton>
											<p:inputText id="typesOfSport" style="margin-left:-4px;" readonly="true"
												value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.typesOfSport == null ? '' : EndorsementLifeProposalActionBean.insuredPersonInfoDTO.typesOfSport.name}" />
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.typesOfSport.setName(null)}" process="@this"
												update="typesOfSport" />
										</div>
									</div>
								</p:panelGrid>
							</p:panelGrid>
						</p:panelGrid>
						<table>
							<p:column rendered="false">
								<tr>
									<td align="left" colspan="3" width="100%">
										<h:panelGroup id="addOnTablePanel" style="width:100%">
											<fieldset style="width: 50%">
												<legend>
													<table>
														<tr>
															<td>
																<p:commandLink action="#{EndorsementLifeProposalActionBean.selectAddOn()}" immediate="true">
																	<h:graphicImage styleClass="#{ApplicationSetting.addStyleClass}" value="#{ApplicationSetting.addIcon}" />
																	<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnAddOn}" update="insuredPersonAddOnTable" />
																</p:commandLink>
															</td>
															<td>
																<h:outputText styleClass="input-label" value="#{label['MANAGE_INSUREDPERSON_ADDON_LABLE']}" />
															</td>
														</tr>
													</table>
												</legend>
												<p:dataTable id="insuredPersonAddOnTable" style="width:100%" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.insuredPersonAddOnDTOList}" var="insuPesAddOn">
													<p:column headerText="AddOn">
														<h:outputText value="#{insuPesAddOn.addOn.name}" />
													</p:column>
													<!-- <p:column headerText="AddOn Type">
														<h:outputText value="#{insuPesAddOn.addOn.addOnType.label}" />
													</p:column> -->
													<p:column headerText="Delete" style="width:50px; text-align:center;">
														<p:commandLink action="#{EndorsementLifeProposalActionBean.removeAddOn(insuPesAddOn)}" id="removeInsuPesAddOnLink" update=":lifeProposalEntryForm:addOnTablePanel">
															<p:graphicImage styleClass="#{ApplicationSetting.deleteStyleClass}" value="#{ApplicationSetting.deleteIcon}" />
														</p:commandLink>
													</p:column>
												</p:dataTable>
											</fieldset>
										</h:panelGroup>
									</td>
								</tr>
							</p:column>
							<tr>
								<td align="left" colspan="3" style="width: 100%;">
									<p:message for="beneficiariesInfoTablePanel" display="text" />
									<h:panelGroup id="beneficiariesInfoTablePanel" style="width: 100%">
										<fieldset style="width: 98%">
											<legend>
												<table>
													<tr>
														<td>
															<p:commandLink action="#{EndorsementLifeProposalActionBean.prepareAddNewBeneficiariesInfo()}" id="beneficiarieid" immediate="true"
																oncomplete="PF('beneficiariesInfoEntryDialog').show();" update=":beneficiaryInfoEntryForm">
																<h:graphicImage styleClass="#{ApplicationSetting.addStyleClass}" value="#{ApplicationSetting.addIcon}" />
															</p:commandLink>
														</td>
														<td>
															<h:outputText styleClass="input-label" value="#{label['MANAGE_INSUREDPERSON_BENEFICIARIESINFO_LABLE']}" />
														</td>
													</tr>
												</table>
											</legend>
											<p:dataTable id="beneficiaryPersonTable" style="width:100%" value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTO.beneficiariesInfoDTOList}" var="beneficiary">
												<p:column headerText="Beneficiary">
													<h:outputText value="#{beneficiary.fullName}" />
												</p:column>
												<p:column headerText="Age">
													<h:outputText value="#{beneficiary.age}" />
												</p:column>
												<p:column headerText="Gender">
													<h:outputText value="#{beneficiary.gender}" />
												</p:column>
												<p:column headerText="ID NO.">
													<h:outputText value="#{beneficiary.fullIdNo == null ? '-' :beneficiary.fullIdNo}" />
												</p:column>
												<p:column headerText="Resident TownShip">
													<h:outputText value="#{beneficiary.residentAddress.township.name}" />
												</p:column>
												<p:column headerText="Beneficiary Percentage">
													<h:outputText value="#{beneficiary.percentage}%" />
												</p:column>
												<p:column headerText="Relationship">
													<h:outputText value="#{beneficiary.relationship.name}" />
												</p:column>
												<p:column headerText="#{label['EDIT_BTN']}" style="width:5%;text-align : center;">
													<p:commandButton styleClass="green-button" icon="fa fa-paint-brush" action="#{EndorsementLifeProposalActionBean.prepareEditBeneficiariesInfo(beneficiary)}"
														id="editBeneficiaryLink" immediate="true" oncomplete="PF('beneficiariesInfoEntryDialog').show();" update=":beneficiaryInfoEntryForm" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}" />
												</p:column>
												
												<p:column headerText="Replace" style="width:5%;text-align : center;">
													<p:commandButton styleClass="green-button" icon="fa fa-paint-brush" value="Replace" action="#{EndorsementLifeProposalActionBean.replaceBeneficiariesInfo(beneficiary)}"
														id="replaceBeneficiaryLink" immediate="true" oncomplete="PF('beneficiariesInfoEntryDialog').show();" update=":beneficiaryInfoEntryForm" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}"/>
												</p:column>
												
												<p:column headerText="#{label['COMMON_DELETE_LABEL']}" style="width:5%;text-align : center;">
													<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.removeBeneficiariesInfo(beneficiary)}" id="removeBeneficiaryLink"
														update=":lifeProposalEntryForm:beneficiariesInfoTablePanel" disabled="#{!EndorsementLifeProposalActionBean.isNonfinancialChange and !EndorsementLifeProposalActionBean.isGroupLifeChange}">
														<p:confirm header="Confirmation" message="#{label['COMMON_MSG_DELETE_CONFIRM_LABEL']}" icon="fa fa-exclamation-triangle" />
													</p:commandButton>
												</p:column>
											</p:dataTable>
										</fieldset>
									</h:panelGroup>
								</td>
							</tr>
						</table>
						<br />
						<br />
						<h:panelGroup id="insuredRecordPanelGroup">
							<p:panel header="#{label['INSURED_RECORD_INFO_LABEL']}" toggleable="true" collapsed="true">
								<p:panelGrid id="insuredRecordPanelGrid" columns="3" layout="grid" columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4" styleClass="ui-panelgrid-blank ui-fluid">
									<p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4,ui-grid-col-8" styleClass="ui-panelgrid-blank ui-fluid">
										<p:outputLabel />
										<p:message for="insurer" display="text" />
										<h:outputLabel value="#{label['INSURANCE_COMPANY']}" styleClass="input-label mandatory" />
										<p:panelGrid styleClass="ui-panelgrid-blank">
											<div style="margin: -6px -6px;" class="ui-g ui-fluid" id="insurerePanel">
												<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
													<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectCoInsuranceCompany()}" id="selectInsurerDialogLink"
														process="@this">
														<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnCoinsurCompany}" update="insurer" />
													</p:commandButton>
													<p:inputText id="insurer" required="true"
														readonly="#{EndorsementLifeProposalActionBean.insuredRecord.company == null ? facesContext.currentPhaseId.ordinal eq 6 ? true : !(not empty param[recordReq.clientId]) : true}"
														value="#{EndorsementLifeProposalActionBean.insuredRecord.company == null ? '' : EndorsementLifeProposalActionBean.insuredRecord.company.name}" />
													<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.insuredRecord.setCompany(null)}" process="@this" update="insurer" />
												</div>
											</div>
										</p:panelGrid>
										<p:outputLabel />
										<p:message for="policyNo" display="text" />
										<h:outputLabel value="#{label['INSURED_RECORD_POLICYNO_LABEL']}" />
										<p:inputText id="policyNo" value="#{EndorsementLifeProposalActionBean.insuredRecord.policyNo}" />
										<p:outputLabel />
										<p:message for="policyStatus" display="text" />
										<h:outputLabel value="Policy Status" />
										<p:inputText id="policyStatus" value="#{EndorsementLifeProposalActionBean.insuredRecord.policyStatus}" />
									</p:panelGrid>
									<p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4,ui-grid-col-8" styleClass="ui-panelgrid-blank ui-fluid">
										<p:outputLabel />
										<p:message for="lifeproduct" display="text" />
										<h:outputLabel value="#{label['PRODUCT_LABLE']}" styleClass="input-label mandatory" />
										<p:panelGrid styleClass="ui-panelgrid-blank">
											<div style="margin: -6px -6px;" class="ui-g ui-fluid" id="productPanel">
												<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
													<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectProduct()}" id="selectProductDialogLink"
														process="@this">
														<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnProduct}" update="lifeproduct" />
													</p:commandButton>
													<p:inputText id="lifeproduct" required="true"
														readonly="#{EndorsementLifeProposalActionBean.insuredRecord.product == null ? facesContext.currentPhaseId.ordinal eq 6 ? true : !(not empty param[recordReq.clientId]) : true}"
														value="#{EndorsementLifeProposalActionBean.insuredRecord.product == null ? '' : EndorsementLifeProposalActionBean.insuredRecord.product.name}" />
													<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.insuredRecord.setProduct(null)}" process="@this"
														update="lifeproduct" />
												</div>
											</div>
										</p:panelGrid>
										<p:outputLabel />
										<p:message for="recordStartDate" display="text" />
										<h:outputLabel value="#{label['INSURED_RECORD_STARTDATE_LABEL']}" />
										<p:calendar id="recordStartDate" pattern="#{ApplicationSetting.dateFormat}" showOn="button" timeZone="#{ApplicationSetting.timeZone}"
											value="#{EndorsementLifeProposalActionBean.insuredRecord.fromDate}" />
										<p:outputLabel />
										<p:message for="recordEndDate" display="text" />
										<h:outputLabel value="#{label['INSURED_RECORD_ENDDATE_LABEL']}" />
										<p:calendar id="recordEndDate" pattern="#{ApplicationSetting.dateFormat}" showOn="button" timeZone="#{ApplicationSetting.timeZone}"
											value="#{EndorsementLifeProposalActionBean.insuredRecord.toDate}" />
									</p:panelGrid>
									<p:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-4,ui-grid-col-8" styleClass="ui-panelgrid-blank ui-fluid">
										<p:outputLabel />
										<p:message for="period" display="text" />
										<h:outputLabel value="#{label['COMPLETED_POLICY_TERM']}" />
										<p:inputNumber inputStyle="text-align:right" decimalPlaces="0" id="period" value="#{EndorsementLifeProposalActionBean.insuredRecord.period}" />
										<p:outputLabel />
										<p:message for="sumInsured" display="text" />
										<h:outputLabel value="#{label['SUMISURED_LABEL']}" />
										<p:inputNumber inputStyle="text-align:right" id="sumInsured" decimalPlaces="2" value="#{EndorsementLifeProposalActionBean.insuredRecord.sumInsured}" />
										<p:outputLabel />
										<p:message for="premium" display="text" />
										<h:outputLabel value="#{label['PREMIUM_LBL']}" />
										<p:inputNumber inputStyle="text-align:right" decimalPlaces="2" id="premium" value="#{EndorsementLifeProposalActionBean.insuredRecord.premium}" />
									</p:panelGrid>
								</p:panelGrid>
								<br />
								<h:panelGrid id="insuredRecordBtnGrid" columns="3">
									<p:commandButton styleClass="commonButtom" value="#{EndorsementLifeProposalActionBean.newInsuredRecord ? label['COMMON_ADDNEW_BTN'] : label['COMMON_UPDATE_BTN']}"
										action="#{EndorsementLifeProposalActionBean.applyInsuredRecord()}" binding="#{recordReq}" style="width:75px;"
										update="@form:insuredRecordPanelGrid @form:insuredRecordBtnGrid @form:insuredRecordTablePanel">
										<f:param name="trailerValidation" value="true" />
									</p:commandButton>
									<p:spacer width="5px;" />
									<p:commandButton styleClass="commonButtom" value="#{label['COMMON_CANCEL_BTN']}" action="#{EndorsementLifeProposalActionBean.createNewInsuredRecord}" process="@this"
										update="@form:insuredRecordPanelGrid @form:insuredRecordBtnGrid @form:insuredRecordTablePanel">
									</p:commandButton>
								</h:panelGrid>
								<br />
								<p:outputPanel id="insuredRecordTablePanel">
									<p:dataTable id="insuredRecordTable" widgetVar="insuredRecordTable" rowIndexVar="index" value="#{EndorsementLifeProposalActionBean.insuredRecordList}" var="record"
										reflow="true">
										<p:column headerText="#{label['DATA_TABLE_NUMBER_LABEL']}" style="width:4%;">
											<h:outputLabel value="#{index + 1}" style="text-align:center;" />
										</p:column>
										<p:column headerText="#{label['INSURANCE_COMPANY']}">
											<h:outputText value="#{record.company.name}" />
										</p:column>
										<p:column headerText="#{label['PRODUCT_LABLE']}">
											<h:outputText value="#{record.product.name}" />
										</p:column>
										<p:column headerText="#{label['INSURED_RECORD_POLICYNO_LABEL']}">
											<h:outputText value="#{record.policyNo}" />
										</p:column>
										<p:column headerText="#{label['SUMISURED_LABEL']}">
											<h:outputText style="float: right;" value="#{record.sumInsured}">
												<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}" />
											</h:outputText>
										</p:column>
										<p:column headerText="#{label['PREMIUM_LBL']}">
											<h:outputText style="float: right;" value="#{record.premium}">
												<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}" />
											</h:outputText>
										</p:column>
										<p:column headerText="#{label['COMPLETED_POLICY_TERM']}">
											<h:outputText value="#{record.period}" />
										</p:column>
										<p:column headerText="#{label['INSURED_RECORD_STARTDATE_LABEL']}">
											<h:outputText value="#{record.fromDate}">
												<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" />
											</h:outputText>
										</p:column>
										<p:column headerText="#{label['INSURED_RECORD_ENDDATE_LABEL']}">
											<h:outputText value="#{record.toDate}">
												<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" />
											</h:outputText>
										</p:column>
										<p:column headerText="Policy Status">
											<h:outputText value="#{record.policyStatus}" />
										</p:column>
										<p:column headerText="#{label['EDIT_BTN']}" style="width:4%;">
											<p:commandButton styleClass="green-button" icon="fa fa-paint-brush" action="#{EndorsementLifeProposalActionBean.prepareUpdateInsuredRecord(record)}"
												process="@this,@form:insuredRecordBtnGrid" update="@form:insuredRecordPanelGrid @form:insuredRecordBtnGrid @form:insuredRecordTablePanel" />
										</p:column>
										<p:column headerText="#{label['COMMON_DELETE_LABEL']}" style="width:4%;">
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.deleteInsuredRecord(record)}"
												process="@this,@form:insuredRecordBtnGrid" update="@form:insuredRecordPanelGrid @form:insuredRecordBtnGrid @form:insuredRecordTablePanel" />
										</p:column>
									</p:dataTable>
								</p:outputPanel>
							</p:panel>
						</h:panelGroup>
						<br />
						<br />
						<p:commandButton action="#{EndorsementLifeProposalActionBean.addNewInsuredPersonInfo}" binding="#{isRequired}" id="addInsuredPersonInfoBtn" style="width: 80px;"
							update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel"
							value="#{EndorsementLifeProposalActionBean.createNewInsuredPersonInfo ? label['COMMON_ADDNEW_BTN'] : label['COMMON_UPDATE_BTN']}"/>
						<br />
						<p:separator style="height:3px" />
						<h:panelGrid columns="4">
							<h:commandLink action="#{EndorsementLifeProposalActionBean.prepareAddNewInsuredPersonInfo()}"  immediate="true"  update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel">
								<f:ajax render=":lifeProposalEntryForm:insuredPersonInfoWizardPanel" />
								<h:panelGrid columns="2">
									<h:graphicImage styleClass="#{ApplicationSetting.addStyleClass}" value="#{ApplicationSetting.addIcon}" />
									<h:outputText styleClass="command-link" value="#{label['COMMON_ADDNEW_LINK']}" />
								</h:panelGrid>
							</h:commandLink>
							<!-- <p:fileUpload allowTypes="/(\.|\/)(xls|xlsx)$/" mode="simple" rendered="#{EndorsementLifeProposalActionBean.contractorType eq 'ORGANIZATION'}" sizeLimit="50000"
								value="#{EndorsementLifeProposalActionBean.uploadedFile}" />
							<p:commandButton actionListener="#{EndorsementLifeProposalActionBean.upload}" ajax="false" rendered="#{EndorsementLifeProposalActionBean.contractorType eq 'ORGANIZATION'}"
								value="Submit" /> -->
							<p:message for="insuredPersonInfoDTOTable" display="text" />
						</h:panelGrid>
						<p:dataTable id="insuredPersonInfoDTOTable"   paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                			rowsPerPageTemplate="5,10,15" rowStyleClass="#{empty insuredPersonInfoDTO.beneficiariesInfoDTOList ? 'rowWarnning' : null}" style="width:100%"
							value="#{EndorsementLifeProposalActionBean.insuredPersonInfoDTOList}"  rowIndexVar="index" var="insuredPersonInfoDTO">
							<p:column headerText="#{label['DATA_TABLE_NUMBER_LABEL']}" style="width:4%;">
									<h:outputLabel value="#{index + 1}" style="text-align:center;" />
							</p:column>
							<p:column headerText="Name">
								<h:outputText value="#{insuredPersonInfoDTO.fullName}" />
							</p:column>
							<p:column headerText="Date Of Birth" style="text-align:left;width:8%;">
								<h:outputText value="#{insuredPersonInfoDTO.dateOfBirth}">
									<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}" />
								</h:outputText>
							</p:column>
							<p:column headerText="Father Name">
								<h:outputText value="#{insuredPersonInfoDTO.fatherName}" />
							</p:column>
							<p:column headerText="Address">
								<h:outputText value="#{insuredPersonInfoDTO.fullAddress}" />
							</p:column>
							<p:column headerText="Sum Insured" rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite ? false :true}" style="width:10%;">
								<h:outputText style="float: right;" value="#{insuredPersonInfoDTO.sumInsuredInfo}">
									<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}" />
								</h:outputText>
							</p:column>
							<p:column headerText="Unit" rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite}">
								<h:outputText style="float: right;" value="#{insuredPersonInfoDTO.unit}">
									<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}" />
								</h:outputText>
							</p:column>
							<p:column headerText="Product Type" style="text-align: center">
								<h:outputText value="#{insuredPersonInfoDTO.product.name}" />
							</p:column>
							<p:column headerText="Age" style="text-align:left;width:4%;">
								<h:outputText value="#{insuredPersonInfoDTO.ageForNextYear}" />
							</p:column>
							<p:column headerText="Period" style="text-align:left;width:7%;">
								<h:outputText style="float:left;" value="#{EndorsementLifeProposalActionBean.lifeProposal.periodMonth} #{EndorsementLifeProposalActionBean.isMonthBase ? '- Month' : '- Year(s)'}" />
							</p:column>
							<p:column headerText="End Date" style="text-align:left;width:8%;">
								<h:outputText value="#{EndorsementLifeProposalActionBean.lifeProposal.endDate}">
									<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}" />
								</h:outputText>
							</p:column>
							<p:column headerText="Replace" style="width:5%;text-align : center;" rendered="#{EndorsementLifeProposalActionBean.isReplaceColumn() and EndorsementLifeProposalActionBean.isGroupLife}" >
								 <p:commandButton styleClass="green-button" icon="fa fa-paint-brush" rendered="#{EndorsementLifeProposalActionBean.isReplaceColumn() and EndorsementLifeProposalActionBean.isGroupLife}"
								 action="#{EndorsementLifeProposalActionBean.prepareReplaceInsuredPersonInfo(insuredPersonInfoDTO)}" 
									id="replaceInsuredPersonInfoLink" update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel" />								
							</p:column>
							<p:column headerText="#{label['EDIT_BTN']}" style="width:5%;text-align : center;">
								<p:commandButton styleClass="green-button" icon="fa fa-paint-brush" action="#{EndorsementLifeProposalActionBean.prepareEditInsuredPersonInfo(insuredPersonInfoDTO)}"
									id="editInsuredPersonInfoLink" update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel" />
							</p:column>
							<p:column headerText="#{label['COMMON_DELETE_LABEL']}" style="width:5%;text-align : center;">
								<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.removeInsuredPersonInfo(insuredPersonInfoDTO)}"
									disabled="#{!EndorsementLifeProposalActionBean.isGroupLifeChange}" id="removeEditInsuredPersonInfoLink" update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel" immediate="true">
									<p:confirm header="Confirmation" message="#{label['COMMON_MSG_DELETE_CONFIRM_LABEL']}" icon="pi pi-exclamation-triangle" />
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</p:panel>
				</p:tab>
				<p:tab id="showPremium" title="Premium Calculation">
					<p:panel header="Premium Calculation">
						<p:dataTable id="showPremiumTbl"  rowIndexVar="index" value="#{EndorsementLifeProposalActionBean.lifeProposalInsuredPersonList}" var="insuredPerson">
							<p:columnGroup type="header">
								<p:row>
									<p:column headerText="#{label['DATA_TABLE_NUMBER_LABEL']}" style="width:5%" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_INSUREPERSON_NAME_LABEL']}" style="width:20%" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_INSUREDPERSON_DOB_LABEL']}" style="width:13%" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_PAYMENTTYPE_LABEL']}" style="width:13%" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_SUM_INSURED_LABEL']}" style="width:18%"
										rendered="#{!EndorsementLifeProposalActionBean.isSportMan and !EndorsementLifeProposalActionBean.isSnakeBite}" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_UNIT_LABEL']}" style="width:20%"
										rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite}" />
									<p:column headerText="Keyfactor" style="width:20%" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_PREMIUM_RATE_LABEL']}" style="width:13%" />
									<p:column headerText="#{label['ADDNEWLIFEPROPOSAL_ONEYR_PREMIUM_LABEL']}" style="width:16%" />
									<p:column headerText="Endorsement Premium" style="width:14%" />
								</p:row>
							</p:columnGroup>
							<p:column style="text-align:center">
									<h:outputLabel value="#{index + 1}" style="text-align:center;" />
							</p:column>
							<p:column style="text-align:left">
								<h:outputText value="#{insuredPerson.fullName}" />
							</p:column>
							<p:column style="text-align:left">
								<h:outputText value="#{insuredPerson.dateOfBirth}">
									<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}" />
								</h:outputText>
							</p:column>
							<p:column style="text-align:right">
								<h:outputText value="#{insuredPerson.paymentType}" />
							</p:column>
							<p:column style="text-align:right" rendered="#{!EndorsementLifeProposalActionBean.isSportMan and !EndorsementLifeProposalActionBean.isSnakeBite}">
								<h:outputText value="#{insuredPerson.calculateSumInsured}">
									<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}" />
								</h:outputText>
							</p:column>
							<p:column style="text-align:right" rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite }" >
								<h:outputText value="#{insuredPerson.unit}"/>
							</p:column>
							<p:column>
								<h:outputText value="#{insuredPerson.keyFactorValueListForDetails}" />
							</p:column>
							<p:column style="text-align:right">
								<h:outputText value="#{insuredPerson.premiumRate}" />
								<h:outputText value="#{EndorsementLifeProposalActionBean.isGroupLife or EndorsementLifeProposalActionBean.isFarmer? '%' : ''}" />
							</p:column>
							<p:column style="text-align:right">
								<h:outputText value="#{insuredPerson.proposedPremium}">
									<f:convertNumber type="number" pattern="#,##0.00" />
								</h:outputText>
							</p:column>
							<p:column style="text-align:right">
								<h:outputText value="#{insuredPerson.endorsementNetBasicPremium}">
									<f:convertNumber type="number" pattern="#,##0.00" />
								</h:outputText>
							</p:column>
							<p:columnGroup type="footer">
								<p:row id="footerRow">
									<p:column colspan="4" footerText="#{label['COMMON_TOTAL']}" style="text-align:right" />
									<p:column footerText="#{ApplicationSetting.getCurrencyFormatString(EndorsementLifeProposalActionBean.sumInsured)}" style="text-align:right"
										rendered="#{!EndorsementLifeProposalActionBean.isSportMan and !EndorsementLifeProposalActionBean.isSnakeBite}" />
									<p:column footerText="#{ApplicationSetting.getCurrencyFormatString(EndorsementLifeProposalActionBean.lifeProposal.units)}" style="text-align:right"
										rendered="#{EndorsementLifeProposalActionBean.isSportMan or EndorsementLifeProposalActionBean.isSnakeBite }" />
									<p:column colspan="2" style="text-align:right" />
									<p:column footerText="#{ApplicationSetting.getCurrencyFormatString(EndorsementLifeProposalActionBean.lifeProposal.proposedPremium)}" style="text-align:right" />
									<p:column colspan="2" style="text-align:right" />
									<p:column footerText="#{ApplicationSetting.getCurrencyFormatString(EndorsementLifeProposalActionBean.lifeProposal.endorsementNetPremium)}" style="text-align:right" />
							
								</p:row>
							</p:columnGroup>
						</p:dataTable>
						<p:panelGrid rendered="#{EndorsementLifeProposalActionBean.isEnquiryEdit}">
							<br/><p:commandButton action="#{EndorsementLifeProposalActionBean.addNewLifeProposal}" disabled="#{EndorsementLifeProposalActionBean.printEndorseLetter}" id="editProposal"
								update=":lifeProposalEntryForm" value="Edit Proposal" rendered="#{!EndorsementLifeProposalActionBean.isConfirmEdit}" style="margin-left:20px;" />
						</p:panelGrid>
					</p:panel>
				</p:tab>
				<p:tab id="workflow" title="Workflow" rendered="#{!EndorsementLifeProposalActionBean.isEnquiryEdit}">
					<p:panel header="Workflow" id="workflowWizardPanel">
						<p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
							<p:panelGrid id="workFlowPanel" columns="2" columnClasses="ui-grid-col-4,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								<p:outputPanel />
								<p:message for="remark" display="text" />
								<h:outputText styleClass="input-label" value="Remark" />
								<p:inputTextarea autoResize="true" id="remark" rows="10" value="#{EndorsementLifeProposalActionBean.remark}">
									<p:ajax update=":lifeProposalEntryForm:remark" />
									<f:validateLength maximum="8000" />
								</p:inputTextarea>
								<p:outputPanel />
								<p:message for="needSurvey" display="text" />
								<h:outputText rendered="#{(!EndorsementLifeProposalActionBean.isSportMan and !EndorsementLifeProposalActionBean.isSnakeBite and !EndorsementLifeProposalActionBean.isPersonalAccident) and EndorsementLifeProposalActionBean.isConfirmEdit or EndorsementLifeProposalActionBean.isEndorse}" styleClass="input-label"
									value="Is it need to survey again?" />
								<p:selectOneRadio id="needSurvey" rendered="#{(!EndorsementLifeProposalActionBean.isSportMan and !EndorsementLifeProposalActionBean.isSnakeBite and !EndorsementLifeProposalActionBean.isPersonalAccident) and EndorsementLifeProposalActionBean.isConfirmEdit or EndorsementLifeProposalActionBean.isEndorse}" style="width:130px;"
									value="#{EndorsementLifeProposalActionBean.surveyAgain}">
									<p:ajax update="responsiblePerson" process="@this" listener="#{EndorsementLifeProposalActionBean.setResponsiblePerson(null)}" />
									<f:selectItem itemLabel="#{label['BOOLEAN_YES_LABEL']}" itemValue="true" />
									<f:selectItem itemLabel="#{label['BOOLEAN_NO_LABEL']}" itemValue="false" />
								</p:selectOneRadio>
								<p:outputPanel />
								<p:message for="responsiblePerson" display="text" />
								<h:outputText styleClass="input-label mandatory" value="Responsible Person" />
								<p:panelGrid styleClass="ui-panelgrid-blank" id="responsiblePersonPanel">
									<div style="margin: -6px -6px;" class="ui-g ui-fluid" id="typesOfSportPanelGroup">
										<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
											<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectUser()}" id="selectUserDialogLink" process="@this">
												<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnUser}" update="responsiblePerson" />
											</p:commandButton>
											<p:inputText id="responsiblePerson" readonly="#{EndorsementLifeProposalActionBean.responsiblePerson == null ? facesContext.currentPhaseId.ordinal eq 6 : true}"
												required="true" style="width:300px;margin-left:-4px;"
												value="#{EndorsementLifeProposalActionBean.responsiblePerson == null ? '' : EndorsementLifeProposalActionBean.responsiblePerson.name}" />
											<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.setResponsiblePerson(null)}" process="@this"
												update="responsiblePerson" />
										</div>
									</div>
								</p:panelGrid>
							</p:panelGrid>
						</p:panelGrid>
						<br />
						<p:panelGrid>
							<p:commandButton action="#{EndorsementLifeProposalActionBean.addNewLifeProposal}" disabled="#{EndorsementLifeProposalActionBean.printEndorseLetter}" rendered="#{!EndorsementLifeProposalActionBean.isConfirmEdit}" id="submitProposal"
								update=":lifeProposalEntryForm" value="Submit Proposal"  style="margin-left:20px;" />
							<p:commandButton action="#{EndorsementLifeProposalActionBean.addNewLifeProposal}" id="updateProposal" update=":lifeProposalEntryForm" value="Update Proposal"
								rendered="#{EndorsementLifeProposalActionBean.isConfirmEdit}" style="margin-left:20px;" />
							<p:commandButton id="endorseLetterPrint" immediate="true" action="#{EndorsementLifeProposalActionBean.generateNonFinancialLetter()}" oncomplete="PF('pdfPreviewDialog').show();" update=":pdfPreviewForm" disabled="#{!EndorsementLifeProposalActionBean.printEndorseLetter}"
						    value="Print Endorse Letter" style="margin-left:20px;" />
						</p:panelGrid>
					</p:panel>
				</p:tab>
			</p:wizard>
			<br />
			<p:commandButton action="dashboard" immediate="true" value="#{label['COMMON_CANCEL_BTN']}" />
			<br />
			<h:outputText style="color:red;" value="#{label['COMMON_MSG_MANDATORY_LABEL']}" />
			<br />
		</h:form>
		<h:form id="addOnEntryForm">
			<p:dialog header="AddOn Entry" hideEffect="explode" id="addOnEntryDialog" resizable="false" showEffect="explode" widgetVar="addOnEntryDialog">
				<table cellspacing="5">
					<tr>
						<td>
							<h:outputText value="" />
						</td>
						<td>
							<p:message for="addOn" id="addOnMsg" display="text" />
						</td>
					</tr>
					<tr>
						<td>
							<h:outputText style="color:red;" value="*" />
							<h:outputText styleClass="input-label" value="AddOn" />
						</td>
						<td>
							<h:panelGrid columns="3" id="addOnPanel">
								<p:inputText id="addOn" readonly="true" style="width:300px;margin-left:-4px;"
									value="#{EndorsementLifeProposalActionBean.insuredPersonAddOnDTO.addOn == null ? '' : EndorsementLifeProposalActionBean.insuredPersonAddOnDTO.addOn.name}" />
							</h:panelGrid>
						</td>
					</tr>
					<tr>
						<td>
							<h:outputText value="" />
						</td>
						<td style="width: 150px;">
							<p:message for="addOnSumInsured" display="text" />
						</td>
					</tr>
					<tr>
						<td style="width: 150px;">
							<h:outputText rendered="#{EndorsementLifeProposalActionBean.insuredPersonAddOnDTO.addOn.premiumRateType == 'BASED_ON_OWN_SUMINSURED' ? true : false}" style="color:red;" value="*" />
							<h:outputText rendered="#{EndorsementLifeProposalActionBean.insuredPersonAddOnDTO.addOn.premiumRateType == 'BASED_ON_OWN_SUMINSURED' ? true : false}" styleClass="input-label"
								value="AddOn Sum Insured" />
						</td>
						<td>
							<p:inputText id="addOnSumInsured" rendered="#{EndorsementLifeProposalActionBean.insuredPersonAddOnDTO.addOn.premiumRateType == 'BASED_ON_OWN_SUMINSURED' ? true : false}"
								style="width:300px;" value="#{EndorsementLifeProposalActionBean.insuredPersonAddOnDTO.addOnSumInsured}">
								<f:validateLength maximum="50" />
							</p:inputText>
						</td>
					</tr>
					<tr>
						<td colspan="2">
							<p:commandButton action="#{EndorsementLifeProposalActionBean.saveInsuredPersonAddOnDTO()}" update=":lifeProposalEntryForm:addOnTablePanel addOnMsg" value="Add" />
						</td>
					</tr>
				</table>
			</p:dialog>
		</h:form>
		<p:dialog appendTo="@(body)" dynamic="true" closable="false" header="#{label['MANAGE_INSUREDPERSON_BENEFICIARIESINFO_LABLE']}" hideEffect="explode"
			id="beneficiariesInfoEntryDialog" modal="true" resizable="false" showEffect="explode" visible="#{facesContext.validationFailed}" widgetVar="beneficiariesInfoEntryDialog"
			width="950" height="450">
			<h:form id="beneficiaryInfoEntryForm">
				<p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
					<p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
						<p:panelGrid id="beneficiaryInfoLeftPanel" columns="2" columnClasses="ui-grid-col-3,ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
							<p:outputLabel />
							<p:message for="initialId" display="text" />
							<h:outputText styleClass="input-label mandatory" value="Initial ID" />
							<p:inputText id="initialId" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.initialId}">
								<f:validateLength maximum="50" />
							</p:inputText>
							<p:outputLabel />
							<p:message for="firstName" display="text" />
							<h:outputText styleClass="input-label mandatory" value="First Name" />
							<p:inputText id="firstName" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.name.firstName}">
								<f:validateLength maximum="50" />
							</p:inputText>
							<p:outputLabel />
							<p:outputLabel />
							<h:outputText styleClass="input-label" value="Middle Name" />
							<p:inputText id="middleName" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.name.middleName}">
								<f:validateLength maximum="50" />
							</p:inputText>
							<p:outputLabel />
							<p:outputLabel />
							<h:outputText styleClass="input-label" value="Last Name" />
							<p:inputText id="lastName" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.name.lastName}">
								<f:validateLength maximum="50" />
							</p:inputText>
							<p:outputLabel />
							<p:message for="gender" display="text" />
							<h:outputText styleClass="input-label mandatory" value="Gender" />
							<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="gender" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.gender}">
								<f:selectItem itemLabel="-- Select Gender --" noSelectionOption="true" />
								<f:selectItems itemLabel="#{type.label}" itemValue="#{type}" value="#{EndorsementLifeProposalActionBean.gender}" var="type" />
							</p:selectOneMenu>
							<p:outputLabel />
							<p:message for="beneficiaryIdType" display="text" />
							<h:outputText styleClass="input-label mandatory" value="IdType" />
							<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="beneficiaryIdType" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType}">
								<f:selectItems itemLabel="#{idType.label}" itemValue="#{idType}" var="idType" value="#{EndorsementLifeProposalActionBean.idTypes}" />
								<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.clearNRC()}" update="beneficiaryInfoPanel beneficiaryIdType" />
							</p:selectOneMenu>
						</p:panelGrid>
						<p:panelGrid id="beneficiaryInfoPanel" columns="2" columnClasses="ui-grid-col-3,ui-grid-col-9" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
							<p:outputLabel />
							<h:panelGroup>
								<p:message for="beneficiaryNrcNo" display="text" />
								<p:message for="beneficiaryFPNo" display="text" />
							</h:panelGroup>
							<h:outputText styleClass="input-label mandatory" rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType ne 'STILL_APPLYING'}"
								value="#{label['ADDNEWMOTORPROPOSAL_DRIVER_IDNO_LABEL']}" />
							<p:panelGrid id="beneficiaryIdNoGroup" columns="4" columnClasses="ui-grid-col-3,ui-grid-col-5,ui-grid-col-3,ui-grid-col-3" layout="grid"
								styleClass="ui-panelgrid-blank ui-fluid"
								rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'NRCNO' or EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq null}">
								<p:selectOneMenu id="benefProvinceCode" rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'NRCNO'}" required="true" style="margin-left:-10px;"
									value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.provinceCode}">
									<f:selectItem itemLabel="" />
									<f:selectItems itemLabel="#{provCode}" itemValue="#{provCode}" value="#{EndorsementLifeProposalActionBean.provinceCodeList}" var="provCode" />
									<p:ajax event="valueChange" listener="#{EndorsementLifeProposalActionBean.changeBenefiProvinceCode}" update="beneficiaryTownshipCode" />
								</p:selectOneMenu>
								<p:selectOneMenu id="beneficiaryTownshipCode" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.townshipCode}"
									rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'NRCNO'}" style="margin-left:-27px;max-width:110px;" filter="true" filterMatchMode="startsWith">
									<f:selectItem itemLabel="" />
									<f:selectItems itemLabel="#{townshipCode}" itemValue="#{townshipCode}" value="#{EndorsementLifeProposalActionBean.townshipCodeList}" var="townshipCode" />
								</p:selectOneMenu>
								<p:selectOneMenu style="margin-left:-45px;" id="beneficiaryIdConditionType" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idConditionType}"
									rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'NRCNO'}">
									<f:selectItem itemLabel="" />
									<f:selectItems itemLabel="#{type.label}" itemValue="#{type}" value="#{EndorsementLifeProposalActionBean.idConditionTypeSelectItemList}" var="type" />
								</p:selectOneMenu>
								<p:inputText id="beneficiaryNrcNo" style="margin-left:-60px;min-width:80px;" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idNo}" required="true"
									onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" maxlength="6" 
									rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'NRCNO'}" >
                                            <f:validateLength minimum="6" maximum="6" />
                                </p:inputText>
							</p:panelGrid>
							<p:panelGrid id="beneficiaryIdNoGroup1" columns="1" columnClasses="ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank ui-fluid"
								rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'FRCNO' or EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'PASSPORTNO'}">
								<p:inputText id="beneficiaryFPNo" style="margin-left:-10px;min-width:230px;" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idNo}"
									rendered="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'FRCNO' or EndorsementLifeProposalActionBean.beneficiariesInfoDTO.idType eq 'PASSPORTNO'}" />
							</p:panelGrid>
						</p:panelGrid>
					</p:panelGrid>
					<p:panelGrid id="beneficiaryInfoRightPanel" columns="2" columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
						<p:outputLabel />
						<p:message for="beneficiaryRelationShip" display="text" />
						<h:outputText styleClass="input-label mandatory" value="#{label['MANAGE_INSUREDPERSON_BENEFICIARIES_RELATIONSHIP_LABEL']}" />
						<p:selectOneMenu converter="omnifaces.SelectItemsIndexConverter" id="beneficiaryRelationShip" required="true"
							value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.relationship}">
							<f:selectItem itemLabel="Select" noSelectionOption="true" />
							<f:selectItems itemLabel="#{relationship.name}" itemValue="#{relationship}" value="#{EndorsementLifeProposalActionBean.relationshipList}" var="relationship" />
						</p:selectOneMenu>
						<p:outputLabel />
						<p:message for="percentage" display="text" />
						<h:outputText styleClass="input-label mandatory" value="#{label['MANAGE_INSUREDPERSON_BENEFICIARIES_PERCENTAGE_LABEL']}" />
						<p:inputText id="percentage" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.percentage}">
							<f:validateDoubleRange maximum="100" minimum="1" />
						</p:inputText>
						<p:outputLabel />
						<p:message for="benificiaryAge" display="text" />
						<h:outputText styleClass="input-label mandatory" value="#{label['MANAGE_INSUREDPERSON_BENEFICIARIES_AGE_LABEL']}" />
						<p:inputText id="benificiaryAge" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.age}">
							<f:validateDoubleRange maximum="100" minimum="1" />
						</p:inputText>
						<p:outputLabel />
						<p:message for="townShip2" display="text" />
						<h:outputText styleClass="input-label mandatory" value="Resident TownShip" />
						<p:panelGrid styleClass="ui-panelgrid-blank">
							<div style="margin: -6px -6px;" class="ui-g ui-fluid" id="townShipPanelGroup2">
								<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
									<p:commandButton styleClass="green-button" icon="fa fa-search" actionListener="#{EndorsementLifeProposalActionBean.selectTownship()}" id="selectTownShipDialogLink2"
										process="@this">
										<p:ajax event="dialogReturn" listener="#{EndorsementLifeProposalActionBean.returnBeneficiariesTownShip}" update="townShip2" />
									</p:commandButton>
									<p:inputText id="townShip2"
										readonly="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.residentAddress.township.name == null ? facesContext.currentPhaseId.ordinal eq 6 : true}" required="true"
										value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.residentAddress.township == null ? '' : EndorsementLifeProposalActionBean.beneficiariesInfoDTO.residentAddress.township.name}"
										style="width:300px;" />
									<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.residentAddress.township.setName(null)}"
										process="@this" update="townShip2" />
								</div>
							</div>
						</p:panelGrid>
						<p:outputLabel />
						<p:message for="address" display="text" />
						<h:outputText styleClass="input-label mandatory" value="Resident Address" />
						<p:inputTextarea id="address" required="true" value="#{EndorsementLifeProposalActionBean.beneficiariesInfoDTO.residentAddress.residentAddress}">
							<f:validateLength maximum="300" />
						</p:inputTextarea>
					</p:panelGrid>
				</p:panelGrid>
				<p:separator />
				<br />
				<p:commandButton action="#{EndorsementLifeProposalActionBean.saveBeneficiariesInfo()}" id="saveBtn" style="width: 80px;margin-left:20px;"
					update=":lifeProposalEntryForm:beneficiariesInfoTablePanel :beneficiaryInfoEntryForm" value="Save" />
				<p:spacer width="10" />
				<p:commandButton immediate="true" oncomplete="PF('beneficiariesInfoEntryDialog').hide();" style="width: 80px;" value="Cancel" />
				<br />
			</h:form>
			<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
				<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
				<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
			</p:confirmDialog>
		</p:dialog>
		<h:form id="paidPremiumForPaidup">
			<p:dialog header="Paid Premium for Paidup" height="100" hideEffect="explode" id="paidPremiumConfirmationDialog" resizable="false" showEffect="explode"
				widgetVar="paidPremiumConfirmationDialog" width="350">
				<h:panelGroup id="confirmationPanel">
					<table>
						<tr>
							<td align="left">
								<h:graphicImage style="width:22px;height:22px;" url="/images/warning.png" />
							</td>
							<td valign="middle">
								<h:outputText style="padding-top:-10px;text-decoration: none;font-size: 12px;" value="Pay premium for the rest period to fill a full year?" />
								<br />
								<h:outputText value="" />
							</td>
						</tr>
					</table>
					<br />
					<p:commandButton action="#{EndorsementLifeProposalActionBean.paidPremiumForPaidUp(true)}" oncomplete="PF('paidPremiumConfirmationDialog').hide();"
						update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel" value="Paid" />
					<p:commandButton action="#{EndorsementLifeProposalActionBean.paidPremiumForPaidUp(false)}" oncomplete="PF('paidPremiumConfirmationDialog').hide();"
						update=":lifeProposalEntryForm:insuredPersonInfoWizardPanel" value="Not Paid" />
				</h:panelGroup>
			</p:dialog>
		</h:form>
		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
			<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
			<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
		</p:confirmDialog>
		<!-- PDF Preview For Non Financial Report -->
		<h:form enctype="multipart/form-data" id="pdfPreviewForm">
			<p:dialog appendTo="@(body)" dynamic="true" header="Print Preview (PDF)" height="505" hideEffect="fade" id="pdfPreviewDialog" modal="true" resizable="false" showEffect="fade" widgetVar="pdfPreviewDialog" width="1070">
				<p:ajax event="close" listener="#{ApplicationSetting.handleDialogClose(EndorsementLifeProposalActionBean.stream)}" update="@form"/>
				<p:media height="500" player="pdf" value="#{EndorsementLifeProposalActionBean.stream}" width="1050"/>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>