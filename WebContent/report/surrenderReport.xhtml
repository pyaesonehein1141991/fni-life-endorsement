<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns="http://www.w3.org/1999/xhtml" xmlns:cyc="http://www.cycdemo.com/java" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" template="/common/commonLayout.xhtml">
	<ui:param name="header" value="#{label['SURRENDER_REPORT']} - REP028" />
	<ui:param name="headerRendered" value="true" />
	<ui:define name="content">
		<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
		<link href="#{request.contextPath}/css/print.css" rel="stylesheet" type="text/css"/>
		<style>
			.ui-selectlistbox-listcontainer {
				height:70px !important;
			}
		</style>
		<h:form id="incomeList">
			<div style="z-index: 100; position: fixed; margin-top: -30px; width: 700px;">
				<p:messages globalOnly="true" id="messages" showDetail="true"/>
			</div>
				<p:panelGrid columns="2" columnClasses="ui-grid-col-8,ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
					<p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
						<p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6," layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
							<p:panelGrid columns="2" columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								<h:outputLabel />
								<p:message  for="startDate"/>
								<h:outputLabel for="startDate" value="Start Date"/>
								<p:calendar id="startDate" required="true" pattern="dd-MM-yyyy" showOn="button" value="#{SurrenderReportActionBean.criteria.startDate}"/>
								
								<h:outputLabel />
								<p:message  for="endDate"/>
								<h:outputLabel for="endDate" value="End Date"/>
								<p:calendar id="endDate" required="true" pattern="dd-MM-yyyy" showOn="button" value="#{SurrenderReportActionBean.criteria.endDate}"/>
							</p:panelGrid>
							<p:panelGrid columns="2" columnClasses="ui-grid-col-3,ui-grid-col-9" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">
								
						
							<h:outputText styleClass="input-label" value="Policy No" />
					<p:panelGrid styleClass="ui-panelgrid-blank" id="selectPolicyPanel">
						<div style="margin: -6px -6px;" class="ui-g ui-fluid" id="selectPolicyPanel">
							<div class="ui-inputgroup ui-g-12 ui-lg-12 ui-lg-12">
								<p:commandButton styleClass="green-button" style="width:30px;" icon="fa fa-search" actionListener="#{SurrenderReportActionBean.selectLifePolicyNo()}"
									id="selectLifePolicyNoDialogLink" immediate="true">
									<p:ajax event="dialogReturn" listener="#{SurrenderReportActionBean.returnLifePolicyNo}" update="policyNo" />
								</p:commandButton>
								<p:inputText id="policyNo" readonly="true" required="true" style="width:250px;"
									value="#{SurrenderReportActionBean.criteria.policyNo == null ? '' : SurrenderReportActionBean.criteria.policyNo}" />
								<p:commandButton styleClass="red-button" icon="fa fa-times" action="#{SurrenderReportActionBean.criteria.setPolicyNo(null)}" process="@this" update='incomeList' />
							</div>
						</div>
					</p:panelGrid>
					</p:panelGrid>
						</p:panelGrid>
					</p:panelGrid>

			</p:panelGrid>
			<p:panelGrid columns="1" columnClasses="ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">	
				<p:panelGrid columns="2" columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank ui-fluid">	
				</p:panelGrid>
			</p:panelGrid>
			<p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
				<p:commandButton action="#{SurrenderReportActionBean.filter}" update=":incomeList" value="Search" style="margin-left:10px;width:130%;"/>
				<p:commandButton action="#{SurrenderReportActionBean.resetCriteria}" update=":incomeList" value="Reset" style="margin-left:26px;width:100%;"/>
			</p:panelGrid>
			<p:separator style="height:1px"/>
			<p:dataTable id="incomeTable" lazy="true" paginator="true" paginatorPosition="bottom" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowIndexVar="rowIndex" rows="10" rowsPerPageTemplate="10,20, 30" value="#{SurrenderReportActionBean.surrenderlist}" var="mkt">
				 <f:facet name="header" >
					<h:commandLink action="#{SurrenderReportActionBean.exportExcel}" immediate="true">
						<p:graphicImage styleClass="#{ApplicationSetting.printStyleClass}" value="/images/excel.png"/> 
					</h:commandLink> 
				</f:facet>
				<p:column headerText="No." style="width:3%;">
					<h:outputText style="float: right;" value="#{rowIndex + 1}"/>
				</p:column>
				<p:column headerText="Policy No." style="width:13%;">
					<h:outputText value="#{mkt.policyNo}"/>
				</p:column>
				<p:column headerText="PolicyStart and EndDate" style="width:7%;">
					<h:outputText value="#{mkt.fromDateToDate}">
						<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
					</h:outputText>
				</p:column>
				<p:column headerText="PaymentType" style="width: 7%;">
					<h:outputText value="#{mkt.paymentType}">
					</h:outputText>
				</p:column>
				<p:column headerText="SumInsured" style="width: 13%;">
					<h:outputText value="#{mkt.sumInsured}">
					</h:outputText>
				</p:column>
				<p:column headerText="Surrender Amount" style="width: 13%;">
					<h:outputText value="#{mkt.surrenderAmount}">
					</h:outputText>
				</p:column>
				<p:column headerText="Premium " style="width:6%;">
					<h:outputText value="#{mkt.basictermPremium}">
					</h:outputText>
				</p:column>
			</p:dataTable>
		
		</h:form>
		<!-- PDF Preview Form -->
		<h:form enctype="multipart/form-data" id="pdfPreviewForm">
			<p:dialog appendToBody="true" dynamic="true" header="Print Preview (PDF)" height="505" hideEffect="fade" id="pdfPreviewDialog" modal="true" resizable="false" showEffect="fade" widgetVar="pdfPreviewDialog" width="1070">
				<p:media height="500" player="pdf" value="#{SurrenderReportActionBean.stream}" width="1050"/>
			</p:dialog>
		</h:form>
		<!-- Select Branch Form -->
	</ui:define>
</ui:composition>